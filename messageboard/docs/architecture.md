# 在线留言板系统架构设计

## 系统整体架构

```
┌─────────────────┐    HTTP/HTTPS    ┌─────────────────┐
│   前端 (Vue)    │ ◄──────────────► │  后端 (Spring   │
│   (Node.js)     │                  │     Boot)       │
└─────────────────┘                  └─────────────────┘
                                              │
                                              │
                    ┌─────────────────────────────────────┐
                    │                                     │
                    ▼                                     ▼
            ┌─────────────┐                      ┌─────────────┐
            │   MySQL    │                      │    Redis    │
            │  (主数据库) │                      │   (缓存)    │
            └─────────────┘                      └─────────────┘
                    │                                     │
                    │                                     │
                    ▼                                     ▼
            ┌─────────────┐                      ┌─────────────┐
            │   Kafka    │                      │   Docker    │
            │ (消息队列)  │                      │ (容器化部署) │
            └─────────────┘                      └─────────────┘
```

## 技术栈详情

### 前端技术栈
- **框架**: Vue.js 3 + Composition API
- **构建工具**: Vite
- **HTTP客户端**: Axios
- **状态管理**: Pinia
- **UI组件库**: Element Plus
- **路由**: Vue Router

### 后端技术栈
- **框架**: Spring Boot 3.x
- **安全**: Spring Security + JWT
- **数据访问**: Spring Data JPA
- **缓存**: Spring Data Redis
- **消息队列**: Spring Kafka
- **数据库**: MySQL 8.0

### 中间件
- **数据库**: MySQL 8.0
- **缓存**: Redis 7.x
- **消息队列**: Apache Kafka 3.x

### 部署与运维
- **容器化**: Docker + Docker Compose
- **版本控制**: GitHub
- **CI/CD**: GitHub Actions (可选)

## 数据流向

1. **用户操作流程**:
   - 用户在前端进行操作（登录、发布留言等）
   - 前端通过Axios发送HTTP请求到后端
   - 后端处理业务逻辑，访问数据库/缓存
   - 返回响应给前端，前端更新UI

2. **缓存策略**:
   - 热门留言数据缓存到Redis
   - 用户会话信息缓存到Redis
   - 缓存过期时间策略

3. **异步处理**:
   - 用户操作通过Kafka异步记录日志
   - 系统监控数据异步收集
   - 邮件通知等异步任务

## 安全设计

- JWT Token认证
- 密码加密存储
- API接口权限控制
- 防止SQL注入和XSS攻击
- 请求频率限制

## 性能优化

- Redis缓存热点数据
- 数据库索引优化
- 前端资源压缩
- 图片懒加载
- 分页查询优化
