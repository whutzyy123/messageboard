import{r as f,X as b,y as k,z as C,Q as r,I as s,A as i,al as a,V as P,M as m,az as E}from"./vendor-D5-y3bXE.js";import{u as q}from"./index-CZ6S7rlw.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{E as _}from"./element-DwdeTbvH.js";const M={class:"register-container"},N={style:{"text-align":"center"}},S={__name:"Register",setup(U){const c=E(),g=q(),p=f(),u=f(!1),o=b({username:"",password:"",confirmPassword:""}),w={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],confirmPassword:[{required:!0,validator:(n,e,t)=>{e!==o.password?t(new Error("两次输入的密码不一致")):t()},trigger:"blur"}]},v=async()=>{var e;await((e=p.value)==null?void 0:e.validate()),u.value=!0;const n=await g.register({username:o.username,password:o.password});u.value=!1,n.success?(_.success("注册成功，请登录"),c.push("/login")):_.error(n.message||"注册失败")};return(n,e)=>{const t=a("el-input"),d=a("el-form-item"),V=a("el-button"),y=a("router-link"),x=a("el-form"),R=a("el-card");return C(),k("div",M,[r(R,{class:"register-card"},{default:s(()=>[e[7]||(e[7]=i("div",{class:"card-header"},[i("h2",null,"用户注册")],-1)),r(x,{ref_key:"formRef",ref:p,model:o,rules:w,onSubmit:e[3]||(e[3]=P(()=>{},["prevent"]))},{default:s(()=>[r(d,{prop:"username"},{default:s(()=>[r(t,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=l=>o.username=l),placeholder:"用户名"},null,8,["modelValue"])]),_:1}),r(d,{prop:"password"},{default:s(()=>[r(t,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=l=>o.password=l),placeholder:"密码",type:"password"},null,8,["modelValue"])]),_:1}),r(d,{prop:"confirmPassword"},{default:s(()=>[r(t,{modelValue:o.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=l=>o.confirmPassword=l),placeholder:"确认密码",type:"password"},null,8,["modelValue"])]),_:1}),r(d,null,{default:s(()=>[r(V,{type:"primary",loading:u.value,onClick:v,style:{width:"100%"}},{default:s(()=>e[4]||(e[4]=[m("注册",-1)])),_:1,__:[4]},8,["loading"])]),_:1}),i("div",N,[e[6]||(e[6]=m(" 已有账号？",-1)),r(y,{to:"/login"},{default:s(()=>e[5]||(e[5]=[m("去登录",-1)])),_:1,__:[5]})])]),_:1},8,["model"])]),_:1,__:[7]})])}}},X=B(S,[["__scopeId","data-v-416de915"]]);export{X as default};
