import{r as _,X as b,y as B,z as C,Q as o,I as t,A as d,al as r,V as E,M as i,az as F}from"./vendor-D5-y3bXE.js";import{u as L}from"./index-CZ6S7rlw.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{E as f}from"./element-DwdeTbvH.js";const N={class:"login-container"},R={style:{"text-align":"center"}},S={__name:"Login",setup(q){const c=F(),g=L(),m=_(),l=_(!1),s=b({username:"",password:""}),v={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},w=async()=>{var e;await((e=m.value)==null?void 0:e.validate()),l.value=!0;const n=await g.login({...s});l.value=!1,n.success?(f.success("登录成功"),c.push("/home")):f.error(n.message||"登录失败")};return(n,e)=>{const p=r("el-input"),a=r("el-form-item"),V=r("el-button"),y=r("router-link"),k=r("el-form"),x=r("el-card");return C(),B("div",N,[o(x,{class:"login-card"},{default:t(()=>[e[6]||(e[6]=d("div",{class:"login-header"},[d("h2",null,"用户登录")],-1)),o(k,{ref_key:"loginFormRef",ref:m,model:s,rules:v,onSubmit:e[2]||(e[2]=E(()=>{},["prevent"]))},{default:t(()=>[o(a,{prop:"username"},{default:t(()=>[o(p,{modelValue:s.username,"onUpdate:modelValue":e[0]||(e[0]=u=>s.username=u),placeholder:"用户名"},null,8,["modelValue"])]),_:1}),o(a,{prop:"password"},{default:t(()=>[o(p,{modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=u=>s.password=u),placeholder:"密码",type:"password"},null,8,["modelValue"])]),_:1}),o(a,null,{default:t(()=>[o(V,{type:"primary",loading:l.value,onClick:w,style:{width:"100%"}},{default:t(()=>e[3]||(e[3]=[i("登录",-1)])),_:1,__:[3]},8,["loading"])]),_:1}),d("div",R,[e[5]||(e[5]=i(" 还没有账号？",-1)),o(y,{to:"/register"},{default:t(()=>e[4]||(e[4]=[i("去注册",-1)])),_:1,__:[4]})])]),_:1},8,["model"])]),_:1,__:[6]})])}}},h=M(S,[["__scopeId","data-v-881fa666"]]);export{h as default};
